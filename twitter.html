<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Minimal Twitter Clone ‚Äî Stable HTML/CSS/JS</title>
    <style>
      :root {
        --bg: #0f1720;
        --card: #0b1220;
        --muted: #9aa4b2;
        --accent: #1d9bf0;
        --danger: #ef4444;
        --glass: rgba(255, 255, 255, 0.03);
        font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI",
          Roboto, "Helvetica Neue", Arial;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
        margin: 0;
        background: linear-gradient(180deg, #071122 0%, #081521 100%);
        color: #e6eef7;
      }
      .app {
        max-width: 1100px;
        margin: 28px auto;
        display: grid;
        grid-template-columns: 280px 1fr 320px;
        gap: 20px;
        padding: 0 18px;
      }
      /* Left nav */
      .nav {
        background: var(--card);
        border-radius: 12px;
        padding: 18px;
        box-shadow: 0 6px 18px rgba(2, 6, 23, 0.6);
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 14px;
      }
      .logo {
        width: 44px;
        height: 44px;
        border-radius: 10px;
        background: linear-gradient(135deg, var(--accent), #6ee7b7);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        color: #042b3a;
      }
      .nav a {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 10px;
        border-radius: 8px;
        color: var(--muted);
        text-decoration: none;
        margin-bottom: 6px;
      }
      .nav a.active,
      .nav a:hover {
        background: var(--glass);
        color: #e6eef7;
      }
      /* Compose and feed */
      .main {
        display: flex;
        flex-direction: column;
        gap: 18px;
      }
      .card {
        background: var(--card);
        border-radius: 12px;
        padding: 16px;
        box-shadow: 0 6px 18px rgba(2, 6, 23, 0.5);
      }
      .composer {
        display: flex;
        gap: 12px;
      }
      .avatar {
        width: 52px;
        height: 52px;
        border-radius: 50%;
        background: linear-gradient(135deg, #9be7ff, #b7f7d8);
        flex: 0 0 52px;
      }
      .compose-area {
        flex: 1;
        display: flex;
        flex-direction: column;
      }
      textarea {
        width: 100%;
        min-height: 70px;
        background: transparent;
        border: 1px solid transparent;
        color: inherit;
        resize: none;
        padding: 10px;
        border-radius: 8px;
        outline: none;
      }
      .composer-controls {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: 8px;
      }
      .left-controls {
        display: flex;
        gap: 8px;
        align-items: center;
      }
      .btn {
        background: var(--accent);
        color: #042b3a;
        padding: 8px 14px;
        border-radius: 999px;
        border: none;
        font-weight: 600;
        cursor: pointer;
      }
      .btn[disabled] {
        opacity: 0.45;
        cursor: not-allowed;
      }
      .muted {
        color: var(--muted);
        font-size: 13px;
      }
      /* Feed */
      .tweet {
        display: flex;
        gap: 12px;
        padding: 12px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.03);
      }
      .tweet:last-child {
        border-bottom: 0;
      }
      .tweet .content {
        flex: 1;
      }
      .tweet .meta {
        display: flex;
        gap: 8px;
        align-items: center;
      }
      .tweet .name {
        font-weight: 700;
      }
      .tweet .handle {
        color: var(--muted);
        font-size: 13px;
      }
      .tweet .text {
        margin: 8px 0;
        white-space: pre-wrap;
      }
      .tweet .actions {
        display: flex;
        gap: 12px;
        color: var(--muted);
        margin-top: 8px;
      }
      .action {
        display: flex;
        gap: 8px;
        align-items: center;
        cursor: pointer;
        padding: 6px;
        border-radius: 8px;
      }
      .action:hover {
        background: rgba(255, 255, 255, 0.02);
      }
      .liked {
        color: #ff7b93;
      }
      .retweeted {
        color: #a5f3fc;
      }
      /* Right column */
      .search {
        display: flex;
        gap: 10px;
        border-radius: 12px;
        padding: 12px;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.02),
          transparent
        );
      }
      .search input {
        flex: 1;
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.04);
        padding: 10px;
        border-radius: 10px;
        color: inherit;
      }
      .trends {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .trend {
        padding: 10px;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.02);
      }
      /* Responsive */
      @media (max-width: 980px) {
        .app {
          grid-template-columns: 1fr;
          max-width: 840px;
        }
        .nav,
        .right {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="app">
      <aside class="nav card" aria-label="sidebar">
        <div class="brand">
          <div class="logo">T</div>
          <div>
            <div style="font-weight: 700">TwitMock</div>
            <div class="muted" style="font-size: 12px">
              A minimal, stable clone
            </div>
          </div>
        </div>
        <nav>
          <a class="active" href="#">Home</a>
          <a href="#">Explore</a>
          <a href="#">Notifications</a>
          <a href="#">Messages</a>
          <a href="#">Bookmarks</a>
          <a href="#">Profile</a>
          <a href="#">More</a>
        </nav>
        <div style="margin-top: 14px">
          <button class="btn" id="composeBtn">New Tweet</button>
        </div>
      </aside>

      <main class="main">
        <section class="card composer" aria-label="tweet-composer">
          <div class="avatar" aria-hidden></div>
          <div class="compose-area">
            <textarea
              id="tweetText"
              maxlength="280"
              placeholder="What's happening?"
            ></textarea>
            <div class="composer-controls">
              <div class="left-controls">
                <div class="muted" id="charCount">0 / 280</div>
              </div>
              <div>
                <button class="btn" id="tweetBtn" disabled>Tweet</button>
              </div>
            </div>
          </div>
        </section>

        <section class="card" id="feed" aria-live="polite">
          <div style="font-weight: 700; font-size: 18px; margin-bottom: 10px">
            Home
          </div>
          <div id="tweetsList"></div>
        </section>
      </main>

      <aside
        class="right card"
        style="display: flex; flex-direction: column; gap: 12px"
      >
        <div class="search">
          <input id="searchInput" placeholder="Search TwitterClone" />
        </div>
        <div>
          <div style="font-weight: 700; margin-bottom: 8px">Trends for you</div>
          <div class="trends">
            <div class="trend">#OpenSource</div>
            <div class="trend">#WebDev</div>
            <div class="trend">#Frontend</div>
          </div>
        </div>
      </aside>
    </div>

    <script>
      // Simple stable Twitter-like feed using localStorage
      const TWEETS_KEY = "twitmock.tweets.v1";

      function uid() {
        return "id-" + Math.random().toString(36).slice(2, 9);
      }

      // Load tweets from storage
      function loadTweets() {
        try {
          const raw = localStorage.getItem(TWEETS_KEY);
          return raw ? JSON.parse(raw) : [];
        } catch (e) {
          console.error("bad storage", e);
          return [];
        }
      }

      function saveTweets(tweets) {
        localStorage.setItem(TWEETS_KEY, JSON.stringify(tweets));
      }

      // Render
      const tweetsList = document.getElementById("tweetsList");
      function render() {
        const q = document
          .getElementById("searchInput")
          .value.toLowerCase()
          .trim();
        const tweets = loadTweets().slice().reverse();
        tweetsList.innerHTML = "";
        if (tweets.length === 0) {
          tweetsList.innerHTML =
            '<div class="muted">No tweets yet ‚Äî be the first to post.</div>';
          return;
        }
        tweets.forEach((t) => {
          if (
            q &&
            !(
              t.text.toLowerCase().includes(q) ||
              (t.name && t.name.toLowerCase().includes(q))
            )
          )
            return;
          const el = document.createElement("article");
          el.className = "tweet";
          el.innerHTML = `
      <div class="avatar" style="width:48px;height:48px;border-radius:50%;flex:0 0 48px;background:${
        t.avatar || "linear-gradient(135deg,#9be7ff,#b7f7d8)"
      }"></div>
      <div class="content">
        <div class="meta"><div class="name">${escapeHtml(
          t.name || "You"
        )}</div><div class="handle">@${escapeHtml(
            t.handle || "you"
          )}</div><div class="muted">¬∑ ${timeAgo(t.createdAt)}</div></div>
        <div class="text">${linkify(escapeHtml(t.text))}</div>
        <div class="actions">
          <div class="action like ${t.liked ? "liked" : ""}" data-id="${
            t.id
          }" data-action="like">‚ù§ <span>${t.likes || 0}</span></div>
          <div class="action retweet ${
            t.retweeted ? "retweeted" : ""
          }" data-id="${t.id}" data-action="retweet">üîÅ <span>${
            t.retweets || 0
          }</span></div>
          <div class="action" data-id="${t.id}" data-action="delete">üóëÔ∏è</div>
        </div>
      </div>
    `;
          tweetsList.appendChild(el);
        });
      }

      // Utilities
      function escapeHtml(s) {
        return (s || "").replace(
          /[&<>"']/g,
          (c) =>
            ({
              "&": "&amp;",
              "<": "&lt;",
              ">": "&gt;",
              '"': "&quot;",
              "'": "&#39;",
            }[c])
        );
      }
      function linkify(text) {
        // simple url and hashtag
        return text
          .replace(
            /(https?:\/\/[^\s]+)/g,
            '<a href="$1" target="_blank" rel="noopener noreferrer">$1</a>'
          )
          .replace(/#(\w+)/g, '<span class="muted">#$1</span>');
      }
      function timeAgo(ts) {
        const diff = Math.floor((Date.now() - ts) / 1000);
        if (diff < 60) return `${diff}s`;
        if (diff < 3600) return `${Math.floor(diff / 60)}m`;
        if (diff < 86400) return `${Math.floor(diff / 3600)}h`;
        return `${Math.floor(diff / 86400)}d`;
      }

      // Events
      const tweetBtn = document.getElementById("tweetBtn");
      const tweetText = document.getElementById("tweetText");
      const charCount = document.getElementById("charCount");

      tweetText.addEventListener("input", () => {
        charCount.textContent = `${tweetText.value.length} / 280`;
        tweetBtn.disabled = tweetText.value.trim().length === 0;
      });

      tweetBtn.addEventListener("click", () => {
        const text = tweetText.value.trim();
        if (!text) return;
        const tweets = loadTweets();
        const t = {
          id: uid(),
          name: "You",
          handle: "you",
          text: text,
          createdAt: Date.now(),
          likes: 0,
          retweets: 0,
          liked: false,
          retweeted: false,
        };
        tweets.push(t);
        saveTweets(tweets);
        tweetText.value = "";
        charCount.textContent = "0 / 280";
        tweetBtn.disabled = true;
        render();
      });

      // Delegated actions: like, retweet, delete
      tweetsList.addEventListener("click", (e) => {
        const a = e.target.closest(".action");
        if (!a) return;
        const id = a.dataset.id;
        const action = a.dataset.action;
        let tweets = loadTweets();
        const idx = tweets.findIndex((t) => t.id === id);
        if (idx === -1) return;
        if (action === "like") {
          tweets[idx].liked = !tweets[idx].liked;
          tweets[idx].likes =
            (tweets[idx].likes || 0) + (tweets[idx].liked ? 1 : -1);
        } else if (action === "retweet") {
          tweets[idx].retweeted = !tweets[idx].retweeted;
          tweets[idx].retweets =
            (tweets[idx].retweets || 0) + (tweets[idx].retweeted ? 1 : -1);
        } else if (action === "delete") {
          if (!confirm("Delete this tweet?")) return;
          tweets.splice(idx, 1);
        }
        saveTweets(tweets);
        render();
      });

      // Compose quick button
      document.getElementById("composeBtn").addEventListener("click", () => {
        tweetText.focus();
      });

      // Search
      document.getElementById("searchInput").addEventListener("input", render)(
        // Seed with a couple stable sample tweets only on first load
        function seed() {
          const loaded = loadTweets();
          if (loaded.length === 0) {
            const samples = [
              {
                id: uid(),
                name: "Alice",
                handle: "alice",
                text: "Hello world! This is a stable minimal Twitter clone.",
                createdAt: Date.now() - 1000 * 60 * 60,
                likes: 2,
                retweets: 0,
                liked: false,
                retweeted: false,
              },
              {
                id: uid(),
                name: "Bob",
                handle: "bob",
                text: "Built with vanilla JS + localStorage. No backend required for demo.",
                createdAt: Date.now() - 1000 * 60 * 60 * 5,
                likes: 1,
                retweets: 0,
                liked: false,
                retweeted: false,
              },
            ];
            saveTweets(samples);
          }
          render();
        }
      )();

      // small accessibility: keyboard shortcut to focus composer (n)
      document.addEventListener("keydown", (e) => {
        if (e.key === "n" && !e.metaKey && !e.ctrlKey) {
          tweetText.focus();
        }
      });
    </script>
  </body>
</html>
